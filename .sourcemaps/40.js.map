{"version":3,"sources":["../../src/pages/key/request-key/request-key.module.ts","../../src/pages/key/request-key/request-key.ts"],"names":[],"mappings":"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","file":"40.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RequestKeyPage } from './request-key';\n\n@NgModule({\n  declarations: [\n    RequestKeyPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RequestKeyPage),\n  ],\n})\nexport class RequestKeyPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/key/request-key/request-key.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,ToastController } from 'ionic-angular';\nimport { KeyProvider } from '../../../providers/key/key';\nimport { Storage } from '@ionic/storage';\n\n/**\n * Generated class for the RequestKeyPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage() \n@Component({\n  selector: 'page-request-key',\n  templateUrl: 'request-key.html',\n})\nexport class RequestKeyPage {\n\n  selectedPackage:any;\n  bankOptions:any = [];\n  bankOptionsBackup:any = [];\n  countryOptions:any = [];\n  packageOptions:any = [];\n  package_id:any = [];\n  number_of_keys:any = [];\n  admin_bank_id:any;\n  transfer_ref_number:any;\n  transfer_ref_attachment:any;\n  noOfKeys : number = 1;\n  selectedPackagesList:any = [];\n  requestKeyList:any = [];\n  step1 = true;\n  step2 = false;\n  step3 = false;\n  constructor(\n  \tpublic navCtrl: NavController, \n  \tpublic navParams: NavParams,\n    private storage: Storage,\n    private key:KeyProvider,\n    private toastCtrl: ToastController) {\n    this.storage.get('me').then((val:any)=>{\n\t  \t\tthis.getdata(val.token)\n\t})\n  }\n\n  getdata(token){  \n\n  \tthis.key.getPackageList().subscribe((res:any) => {\n      this.packageOptions= res.message;\n      for (var i = 0; i<this.packageOptions.length;  i++){\n        this.packageOptions[i].package_amount = parseFloat(this.packageOptions[i].package_amount)\n        this.packageOptions[i].package_name = this.packageOptions[i].package_name.split(' ').map(w => w[0].toUpperCase() + w.substr(1).toLowerCase()).join(' ');\n      }    \n    });\n\n    this.key.getBankList().subscribe((res1:any) => {\n      this.bankOptions = res1.message;\n      this.bankOptionsBackup = res1.message;\n      this.bankOptions.forEach(item =>{\n      var exists = this.countryOptions.filter(element => element.country_name == item.country_name)\n       if(exists.length == 0){\n       var addCountry = {\n         country_name: item.country_name,\n         id: item.country_id,\n         }\n         this.countryOptions.push(addCountry)\n       }\n       else{     \n       }  \n      })\n    });\n\n    this.key.getRequestedKeyList(token).subscribe((res:any) => {\n      console.log(res);   \n      this.requestKeyList = res.message;\n    });\n\n\n  }\n\n   addToCart(item,number_of_keys){\n    console.clear()\n   var totalvalue = number_of_keys*item.package_amount;\n   var exists = this.selectedPackagesList.filter(element => element.id == item.id)\n   if(exists.length == 0){\n   var addPackage = {\n     id: item.id,\n     package_name: item.package_name,\n     validity_days: item.validity_days,\n     number_of_keys: parseInt(number_of_keys),\n     totalvalue : totalvalue\n   }\n   this.selectedPackagesList.push(addPackage)\n   }\n\n   else{\n     var indexOf = this.selectedPackagesList.indexOf(exists[0]);\n     this.selectedPackagesList[indexOf].number_of_keys +=  parseInt(number_of_keys);\n     this.selectedPackagesList[indexOf].totalvalue +=  totalvalue;\n   }\n  }\n\n  removeItem(item){\n    var indexOf = this.selectedPackagesList.indexOf(item);     \n    this.selectedPackagesList.splice(indexOf, 1);\n  }\n\n\n  selectBank(value){\n    console.clear();\n    console.log(value);\n    this.bankOptions = this.bankOptionsBackup.filter(element => element.country_name == value);\n    this.bankOptions.forEach(ele=>{\n    this.admin_bank_id = ele.id;\n    })\n  }\n\n  get subTotal(){\n    var subtotal = 0;\n    this.selectedPackagesList.forEach(ele =>{\n      subtotal += ele.totalvalue;\n    })\n    return subtotal;\n  }\n\n  ionViewDidLoad() {\n\t   console.log('ionViewDidLoad RequestKeyPage');\n  }\n\n  getParseFloat(val){\n    return parseFloat(val).toFixed(2);\n  }\n\n  selectImage(files: FileList) {\n    this.transfer_ref_attachment = files.item(0);\n}\n\n\nsubmit(){\n    this.selectedPackagesList.forEach(e =>{\n    this.package_id.push(e.id);\n    this.number_of_keys.push(e.number_of_keys)\n    }) \n    var f = new FormData()\n    f.append('token' , localStorage.getItem('token'))\n    f.append('package_id' , this.package_id.toString())\n    f.append('number_of_keys' , this.number_of_keys.toString())\n    f.append('admin_bank_id' , this.admin_bank_id)\n    f.append('transfer_ref_number' , this.transfer_ref_number)\n    f.append('transfer_ref_attachment' , this.transfer_ref_attachment)\n    this.key.requestKey(f).subscribe((res:any) => {\n      console.clear();\n      console.log(res);\n      if (res.status){\n      this.toast(res.message);\n      this.step1 = true;\n      this.step2 = false;\n      this.step3 = false;\n      this.noOfKeys = 1;\n      this.storage.get('me').then((val:any)=>{\n\t  \t\tthis.getdata(val.token)\n\t  });\n      }\n      else{\n      this.toast(res.message);\n      }   \n    });\n    \n  }\n\n\n  toast(msg){\n  \t let toast = this.toastCtrl.create({\n          message: msg,\n          duration: 3000\n        });\n\n        toast.onDidDismiss(() => {\n          console.log('Dismissed toast');\n        });\n\n        toast.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/key/request-key/request-key.ts"],"sourceRoot":""}